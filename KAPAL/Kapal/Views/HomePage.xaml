<Page x:Class="Kapal.Views.HomePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:oxy="http://oxyplot.org/wpf"
      Title="Home"
      Background="#F7FAFC">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="0,0,0,20" Width="731">

            <!-- ========== HERO ========== -->
            <Grid Height="220" Margin="0 0 0 16">
                <Grid.Background>
                    <ImageBrush ImageSource="/Assets/myKapal.png" Stretch="UniformToFill" />
                </Grid.Background>
                <!-- overlay gelap tipis -->
                <Rectangle Fill="#BF0F172A"/>
                <StackPanel Margin="24" VerticalAlignment="Center">
                    <TextBlock Text="KAPAL: Katalog Pelabuhan dan Laporan"
                               FontSize="28" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="Kelola data kapal, pendaratan, dan tangkapan — plus analitik ringkas."
                               Margin="0,6,0,0" Foreground="#E6FFFFFF"/>
                </StackPanel>
            </Grid>

            <!-- ========== ANALYTICS CARDS (3 kolom) ========== -->
            <UniformGrid Columns="3" Margin="16,0,16,24">
                <!-- Card 1: Pie Species by Weight -->
                <Border CornerRadius="10" Background="White" Padding="12" Margin="8" 
                        BorderBrush="#E2E8F0" BorderThickness="1" >
                    <StackPanel>
                        <TextBlock Text="Top Species by Total Weight" FontWeight="SemiBold" />
                        <oxy:PlotView x:Name="PlotSpeciesPie" Height="220" Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Card 2: Column Vessel by Gear -->
                <Border CornerRadius="10" Background="White" Padding="12" Margin="8"
                        BorderBrush="#E2E8F0" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Vessel Count by Gear" FontWeight="SemiBold" />
                        <oxy:PlotView x:Name="PlotVesselByGear" Height="220" Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Card 3: Line Landings (Last 14 Days) -->
                <Border CornerRadius="10" Background="White" Padding="12" Margin="8"
                        BorderBrush="#E2E8F0" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Landings per Day (Last 14 days)" FontWeight="SemiBold" />
                        <oxy:PlotView x:Name="PlotLandingsTrend" Height="220" Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- ========== DATA ENTRY / LIST ========== -->
            <Grid Margin="16" Height="310">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="12"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="12"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Search toolbar -->
                <DockPanel Grid.Row="0" LastChildFill="False">
                    <TextBox x:Name="tbSearch" Width="320" Height="32" Margin="0 0 8 0" VerticalContentAlignment="Center"/>
                    <Button Content="Search" Width="100" Click="BtnSearch_Click"/>
                    <Button Content="Reset"  Width="100" Margin="8 0 0 0" Click="BtnReset_Click"/>
                    <Button Content="Refresh" Width="100" Margin="8 0 0 0" Click="BtnRefresh_Click"/>
                </DockPanel>

                <!-- List vessels -->
                <DataGrid x:Name="dgVessels" Grid.Row="2"
                          Height="200"
                          AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False"
                          SelectionMode="Single" SelectionChanged="DgVessels_SelectionChanged" VerticalAlignment="Top">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="VesselId" Binding="{Binding VesselId}" Width="120"/>
                        <DataGridTextColumn Header="Name"     Binding="{Binding Name}"     Width="*"/>
                        <DataGridTextColumn Header="RegNumber" Binding="{Binding RegNumber}" Width="160"/>
                        <DataGridTextColumn Header="Owner"    Binding="{Binding OwnerName}" Width="*"/>
                        <DataGridTextColumn Header="Gear"     Binding="{Binding Gear}"    Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Actions -->
                <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Add Vessel" Width="130" Height="34" Click="BtnAddVessel_Click"/>
                    <Button x:Name="btnAddLanding" Content="Add Landing" Width="130" Height="34" Margin="8 0 0 0"
                            IsEnabled="False" Click="BtnAddLanding_Click"/>
                    <Button x:Name="btnAddCatch" Content="Add Catch" Width="130" Height="34" Margin="8 0 0 0"
                            IsEnabled="False" Click="BtnAddCatch_Click"/>
                </StackPanel>
            </Grid>
        </StackPanel>
    </ScrollViewer>
</Page>
